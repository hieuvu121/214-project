{% extends 'base.html' %}
{% block body %}
<!--filtering box -->
<div class="container my-4">
    <div class="row g-4">
        <aside class=" col-12 col-lg-3">

            <!--Filter part-->
            <div class="p-3 bg-white rounded-3 shadow-sm">
                <div class="d-flex justify-content-between align-items-center mb-2">
                    <h5 class="m-0">Filters</h5>
                    <button class="btn btn-link btn-sm p-0" id="clearFilters">CLEAR ALL</button>
                </div>
                <small class="text-muted d-block mb-3" id="resultCount"></small>
                <div class="border-top">
                    <h6 class="fw-semibold">Stops</h6>
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" value="0" id="fNonStop"></input>
                        <label class="form-check-label" for="fNonStop">Non-Stop</label>
                    </div>
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="f1Stop" value="1"></input>
                        <label class="form-check-label" for="f1Stop">1 Stop</label>
                    </div>
                </div>

                <!--Departure time-->
                <div class="border-top pt-3">
                    <h6 class="fw-semibold">Departure times</h6>
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="fEvening" value="evening"></input>
                        <label class="form-check-label" for="fEvening">Evening(18:30-23:59)</label>
                    </div>
                </div>

                <!--Airlines-->
                <div class="border-top pt-3">
                    <h6 class="fw-semibold">Airlines</h6>
                    {% for a in airlines %}
                    <div class="form-check">
                        <input class="form-check-input airline-filter" type="checkbox" value="{{a|escape}}" id="al-{{forloop.counter}}"></input>
                        <label class="form-check-label" for="al-{{forloop.counter}}">{{a}}</label>
                    </div>
                    {% endfor %}
                </div>           
            </div>
        </aside>

        <!--Display result lists-->
        <section class="col-12 col-lg-9">

            <!--sorting part-->
            <div class="d-flex align-items-end justify-content-between flex-wrap mb-3">
                <div>
                    <h3 class="mb-1">Departing Flight</h3>
                    <div class="text-muted">
                        {{origin}}->{{dest}}
                        {% if depart_date %} â€¢ {{depart_date}}{% endif %}
                    </div>
                </div>
                <div class="d-flex align-items-center gap-2">
                    <label class="small text-muted">Sort by</label>
                    <select id="sortBy" class="form-select-sm" style="min-width:240px;">
                        <option value="depart_asc">Departure Time(Earliest)</option>
                        <option value="price_asc">Price(Lowest)</option>
                        <option value="price_desc">Price(Highest)</option>
                        <option value="duration_asc">Duration(Shortest)</option>
                    </select>
                </div>
            </div>

            <!--outbound list-->
            <div id="outboundList" class="vstack gap-3">
                <!--loop through outbound list-->
                {% for f in outbound %}
                <article class="bg-white rounded-3 p-3 shadow-sm flight-card"
                        data-stops="{{f.stops}}"
                        data-depart="{{f.depart}}"
                        data-duration="{{f.duration_min}}"
                        data-price="{{f.price}}"
                        data-airline="{{f.airline}}">
                    <div class="row align-items-center g-3">
                        <div class="col-12 col-md-2 text-md-center">
                            <div class="fw-semibold">{{f.airline}}</div>
                            <small class="text-muted">{{f.code}}</small>
                        </div>
                        <div class="col-12 col-md-6">
                            <div class="d-flex align-items-center justify-content-between">
                                <div class="fw-bold fs-5">{{f.depart}}</div>
                                <small class="text-muted">{{f.origin}}</small>
                            </div>
                            <div class="text-center flex-grow-1 px-3">
                                <i class="bi bi-airplane"></i>
                                <div class="small text-muted">
                                    {{f.dur_h}}h {{f.dur_m}}m
                                    {% if f.stops == 0 %}
                                        ,Non Stop
                                    {% else %}
                                        ,{{f.stops}} stops
                                    {% endif %}
                                </div>
                            </div>
                            <div class="text-end">

                            </div>

                        </div>

                    </div>
                </article>
                {% endfor %}
            </div>
        </section>


    </div>
</div>
{% endblock body %}